<h2>Edit Recipe</h2>

<%= form_tag recipe_path(@recipe.id), method: :patch do |f| %>
  <!-- <% if @recipe.errors.any? %>
    <div class="alert alert-danger" role="alert">
      <ul class='error-messages'>
        <% @recipe.errors.each do |column_name, message| %>
          <li><%= column_name.upcase %> <%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %> -->

  <%= label_tag "Title:" %><br>
  <%= text_field_tag "recipe_form[update][title]", @recipe.title if @recipe.title %><br>

  <%= label_tag "Description:" %><br>
  <%= text_area_tag "recipe_form[update][description]", @recipe.description if @recipe.description %><br>

  <%= label_tag "Yields (ex. 1 pizza for 2 people)" %><br>
  <%= text_field_tag "recipe_form[update][yield]", @recipe.yield if @recipe.yield %><br>

  <%= label_tag "Time to Cook:" %><br>
  <%= text_field_tag "recipe_form[update][time]", @recipe.yield if @recipe.yield %><br>

  <%= label_tag "Ingredients:" %><br>
  <ul>
  <% @recipe.ingredients.each do |ingredient| %>
    <li><%= check_box_tag "recipe_form[update][ingredients][]", ingredient.id, @recipe.ingredients.include?(ingredient) %>
    <%= label_tag "recipe_form[update][ingredients][]", ingredient.name %><br>

    <%= label_tag "Measurement (ex: 1 cup):" %><br>
    <%= text_field_tag "recipe_form[update][measurement]", find_measurement(ingredient) %></li>
    <hr>
  <% end %>

  <% @ingredients.each do |ingredient| %>
    <% unless @recipe.ingredients.include?(ingredient) %>
      <li><%= check_box_tag "recipe_form[update][ingredients][]", ingredient.id, @recipe.ingredients.include?(ingredient) %>
      <%= label_tag "recipe_form[update][ingredients][]", ingredient.name %><br>
      <%= label_tag "Measurement (ex: 1 cup):" %><br>
      <%= text_field_tag "recipe_form[update][measurement]" %></li>
      <hr>
    <% end %>
  <% end %>
  </ul>
  <%= label_tag "Directions:" %><br>
  <%= text_area_tag "recipe_form[update][directions]", @recipe.directions if @recipe.directions %><br>

  <%= submit_tag "Save", class: "btn btn-primary btn-lg" %>
<% end %>
